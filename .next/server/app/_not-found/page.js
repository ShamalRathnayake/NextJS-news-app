(()=>{var e={};e.id=409,e.ids=[409],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55315:e=>{"use strict";e.exports=require("path")},89857:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var s=r(3003),a=r(14293),o=r(66550),i=r.n(o),n=r(86979),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let c=["",{children:["/_not-found",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.t.bind(r,52075,23)),"next/dist/client/components/not-found-error"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,10214)),"C:\\Users\\shama\\Desktop\\New folder\\news-app\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,52075,23)),"next/dist/client/components/not-found-error"]}],d=[],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/_not-found/page",pathname:"/_not-found",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},18966:(e,t,r)=>{Promise.resolve().then(r.bind(r,33521)),Promise.resolve().then(r.bind(r,60134)),Promise.resolve().then(r.bind(r,29394))},92119:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,92639,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23)),Promise.resolve().then(r.t.bind(r,22816,23))},33521:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>l,E:()=>c});var s=r(68819),a=r(17266),o=r(35047),i=r(29394);let n=(0,a.createContext)(),l=({children:e})=>{let[t,r]=(0,a.useState)(null),[l,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(!0),p=(0,o.useRouter)();(0,a.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("user")),t=localStorage.getItem("token");e&&t&&(r(e),c(t)),u(!1)},[]);let h=async e=>{try{let t=await fetch("http://localhost:5000/api/v1/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();if(!t.ok)throw Error(s.message||"Login failed");let{token:a,user:o}=s;localStorage.setItem("token",a),c(a),localStorage.setItem("user",JSON.stringify(o)),r(o),i.Am.success("Login Successful"),p.push("/dashboard")}catch(e){console.error("Login error:",e),i.Am.error(e.message||e||"Error")}};return(0,s.jsx)(n.Provider,{value:{user:t,token:l,loading:d,login:h,logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),r(null),p.push("/")}},children:e})},c=()=>(0,a.useContext)(n)},60134:(e,t,r)=>{"use strict";r.d(t,{ArticlesProvider:()=>l,l:()=>c});var s=r(68819),a=r(17266),o=r(33521),i=r(29394);let n=(0,a.createContext)(),l=({children:e})=>{let{token:t}=(0,o.E)(),[r,l]=(0,a.useState)([]),[c,d]=(0,a.useState)(!0),[u,p]=(0,a.useState)(null),[h,m]=(0,a.useState)(1),v=async e=>{console.log("\uD83D\uDE80 ~ fetchArticles ~ pageNum:",e),d(!0);try{let t=await fetch(`http://localhost:5000/api/v1/news?page=1&limit=${9*(e||h)}`),r=await t.json();if(!t.ok)throw Error(r.message||"Failed to fetch articles");l(r.data)}catch(e){p(e.message)}finally{d(!1)}},g=async()=>{m(h+1),await v(h+1)},f=async e=>{try{let r=await fetch("http://localhost:5000/api/v1/news/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(e)}),s=await r.json();if(!r.ok)throw Error(s.message||"Failed to add article");await v(h),i.Am.success("Create Successful")}catch(e){p(e.message),i.Am.error(e.message||"Create Failed")}},w=async(e,r)=>{try{let s=await fetch(`/api/articles/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(r)}),a=await s.json();if(!s.ok)throw Error(a.message||"Failed to update article");await v(h),i.Am.success("Update Successful")}catch(e){p(e.message),i.Am.error(e.message||"Update Failed")}},P=async e=>{try{let r=await fetch(`http://localhost:5000/api/v1/news/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),s=await r.json();if(!r.ok)throw Error(s.message||"Failed to delete article");await v(h),i.Am.success("Delete Successful")}catch(e){p(e.message),i.Am.error(e.message||"Delete Failed")}};return(0,a.useEffect)(()=>{v()},[]),(0,s.jsx)(n.Provider,{value:{articles:r,loading:c,error:u,addArticle:f,updateArticle:w,deleteArticle:P,setPage:m,fetchArticles:v,loadNextPage:g},children:e})},c=()=>(0,a.useContext)(n)},58804:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{AuthProvider:()=>o,useAuthContext:()=>i});var a=r(71851);let e=await (0,a.createProxy)(String.raw`C:\Users\shama\Desktop\New folder\news-app\app\components\Context\AuthProvider.js`),o=e.AuthProvider,i=e.useAuthContext;s()}catch(e){s(e)}},1)},28679:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{ArticlesProvider:()=>o,useArticles:()=>i});var a=r(71851);let e=await (0,a.createProxy)(String.raw`C:\Users\shama\Desktop\New folder\news-app\app\components\Context\NewsContext.js`),o=e.ArticlesProvider,i=e.useArticles;s()}catch(e){s(e)}},1)},10214:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>h,metadata:()=>m});var a=r(89351),o=r(96160),i=r.n(o),n=r(11427),l=r.n(n);r(97001),r(67272);var c=r(58804),d=r(58384),u=r(28679),p=e([c,d,u]);[c,d,u]=p.then?(await p)():p;let m={title:"News App",description:"News App"};function h({children:e}){return(0,a.jsx)("html",{lang:"en",children:(0,a.jsxs)("body",{className:`${i().variable} ${l().variable} antialiased`,children:[(0,a.jsx)(d.ToastContainer,{position:"top-right",autoClose:3e3,hideProgressBar:!1}),(0,a.jsx)(c.AuthProvider,{children:(0,a.jsx)(u.ArticlesProvider,{children:e})})]})})}s()}catch(e){s(e)}})},67272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[147,912],()=>r(89857));module.exports=s})();