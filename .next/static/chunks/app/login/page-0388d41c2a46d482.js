(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{49158:(e,s,t)=>{Promise.resolve().then(t.bind(t,7657))},6182:(e,s,t)=>{"use strict";t.d(s,{AuthProvider:()=>n,E:()=>d});var r=t(57437),a=t(2265),l=t(16463),i=t(23580);let o=(0,a.createContext)(),n=e=>{let{children:s}=e,[t,n]=(0,a.useState)(null),[d,c]=(0,a.useState)(null),[m,u]=(0,a.useState)(!0),x=(0,l.useRouter)();(0,a.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("user")),s=localStorage.getItem("token");e&&s&&(n(e),c(s)),u(!1)},[]);let h=async e=>{try{let s=await fetch("".concat("http://localhost:5000/api/v1/","admin/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await s.json();if(!s.ok)throw Error(t.message||"Login failed");let{token:r,user:a}=t;localStorage.setItem("token",r),c(r),localStorage.setItem("user",JSON.stringify(a)),n(a),i.Am.success("Login Successful"),x.push("/dashboard")}catch(e){console.error("Login error:",e),i.Am.error(e.message||e||"Error")}};return(0,r.jsx)(o.Provider,{value:{user:t,token:d,loading:m,login:h,logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),n(null),x.push("/")}},children:s})},d=()=>(0,a.useContext)(o)},7657:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var r=t(57437),a=t(66648),l=t(39381),i=t(14245),o=t(6182),n=t(16463),d=t(2265);let c=e=>{let{children:s}=e,{user:t,loading:a}=(0,o.E)(),l=(0,n.useRouter)();return((0,d.useEffect)(()=>{!a&&t&&["superAdmin","admin"].includes(t.role)&&l.push("/dashboard")},[t,a]),a)?null:(0,r.jsx)(r.Fragment,{children:s})},m=i.Ry({email:i.Z_().email("Invalid email address").required("Email is required"),password:i.Z_().min(8,"Password must be at least 8 characters").required("Password is required")}),u=()=>{let{login:e}=(0,o.E)(),s=async s=>{await e(s)};return(0,r.jsx)(c,{children:(0,r.jsx)("main",{children:(0,r.jsx)("div",{className:"flex justify-center items-center bg-gray-100 font-[sans-serif] h-full md:min-h-screen p-4",children:(0,r.jsxs)("div",{className:"grid justify-center max-w-md mx-auto",children:[(0,r.jsx)("div",{children:(0,r.jsx)(a.default,{className:"w-full object-cover rounded-2xl",src:"https://readymadeui.com/login-image.webp",alt:"login-image",width:500,height:500})}),(0,r.jsx)(l.J9,{initialValues:{email:"",password:""},validationSchema:m,onSubmit:s,children:e=>{let{isSubmitting:s}=e;return(0,r.jsxs)(l.l0,{className:"bg-white rounded-2xl p-6 -mt-24 relative z-10 shadow-[0_2px_16px_-3px_rgba(6,81,237,0.3)]",children:[(0,r.jsx)("div",{className:"mb-12",children:(0,r.jsx)("h3",{className:"text-3xl font-extrabold text-blue-600",children:"Sign In"})}),(0,r.jsxs)("div",{className:"relative flex flex-col mb-6",children:[(0,r.jsx)(l.gN,{name:"email",type:"text",className:"w-full text-gray-800 text-sm border-b border-gray-300 focus:border-blue-600 px-2 py-3 outline-none",placeholder:"Enter email"}),(0,r.jsx)(l.Bc,{name:"email",component:"span",className:"text-red-500 text-xs mt-1"})]}),(0,r.jsxs)("div",{className:"relative flex flex-col mb-6",children:[(0,r.jsx)(l.gN,{name:"password",type:"password",className:"w-full text-gray-800 text-sm border-b border-gray-300 focus:border-blue-600 px-2 py-3 outline-none",placeholder:"Enter password"}),(0,r.jsx)(l.Bc,{name:"password",component:"span",className:"text-red-500 text-xs mt-1"})]}),(0,r.jsx)("div",{className:"mt-16",children:(0,r.jsx)("button",{type:"submit",disabled:s,className:"w-full py-2.5 px-4 text-sm font-semibold tracking-wider rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none",children:s?"Signing in...":"Sign in"})}),(0,r.jsx)("hr",{className:"my-6 border-gray-300"})]})}})]})})})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[415,311,130,215,744],()=>s(49158)),_N_E=e.O()}]);