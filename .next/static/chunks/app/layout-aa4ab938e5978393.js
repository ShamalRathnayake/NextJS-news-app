(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{62009:(e,t,a)=>{Promise.resolve().then(a.bind(a,6182)),Promise.resolve().then(a.bind(a,18399)),Promise.resolve().then(a.t.bind(a,44751,23)),Promise.resolve().then(a.t.bind(a,64982,23)),Promise.resolve().then(a.bind(a,23580)),Promise.resolve().then(a.t.bind(a,53982,23)),Promise.resolve().then(a.t.bind(a,45214,23))},6182:(e,t,a)=>{"use strict";a.d(t,{AuthProvider:()=>i,E:()=>n});var s=a(57437),o=a(2265),r=a(16463),l=a(23580);let c=(0,o.createContext)(),i=e=>{let{children:t}=e,[a,i]=(0,o.useState)(null),[n,h]=(0,o.useState)(null),[u,m]=(0,o.useState)(!0),d=(0,r.useRouter)();(0,o.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("user")),t=localStorage.getItem("token");e&&t&&(i(e),h(t)),m(!1)},[]);let g=async e=>{try{let t=await fetch("".concat("http://localhost:5000/api/v1/","admin/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();if(!t.ok)throw Error(a.message||"Login failed");let{token:s,user:o}=a;localStorage.setItem("token",s),h(s),localStorage.setItem("user",JSON.stringify(o)),i(o),l.Am.success("Login Successful"),d.push("/dashboard")}catch(e){console.error("Login error:",e),l.Am.error(e.message||e||"Error")}};return(0,s.jsx)(c.Provider,{value:{user:a,token:n,loading:u,login:g,logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),i(null),d.push("/")}},children:t})},n=()=>(0,o.useContext)(c)},18399:(e,t,a)=>{"use strict";a.d(t,{ArticlesProvider:()=>i,l:()=>n});var s=a(57437),o=a(2265),r=a(6182),l=a(23580);let c=(0,o.createContext)(),i=e=>{let{children:t}=e,{token:a}=(0,r.E)(),[i,n]=(0,o.useState)([]),[h,u]=(0,o.useState)(!0),[m,d]=(0,o.useState)(null),[g,p]=(0,o.useState)(1),f=async e=>{console.log("\uD83D\uDE80 ~ fetchArticles ~ pageNum:",e),u(!0);try{let t=await fetch("".concat("http://localhost:5000/api/v1/","news?page=1&limit=").concat(9*(e||g))),a=await t.json();if(!t.ok)throw Error(a.message||"Failed to fetch articles");n(a.data)}catch(e){d(e.message)}finally{u(!1)}},v=async()=>{p(g+1),await f(g+1)},y=async e=>{try{let t=await fetch("".concat("http://localhost:5000/api/v1/","news/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(e)}),s=await t.json();if(!t.ok)throw Error(s.message||"Failed to add article");await f(g),l.Am.success("Create Successful")}catch(e){d(e.message),l.Am.error(e.message||"Create Failed")}},S=async(e,t)=>{try{let s=await fetch("/api/articles/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)}),o=await s.json();if(!s.ok)throw Error(o.message||"Failed to update article");await f(g),l.Am.success("Update Successful")}catch(e){d(e.message),l.Am.error(e.message||"Update Failed")}},w=async e=>{try{let t=await fetch("".concat("http://localhost:5000/api/v1/","news/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}}),s=await t.json();if(!t.ok)throw Error(s.message||"Failed to delete article");await f(g),l.Am.success("Delete Successful")}catch(e){d(e.message),l.Am.error(e.message||"Delete Failed")}};return(0,o.useEffect)(()=>{f()},[]),(0,s.jsx)(c.Provider,{value:{articles:i,loading:h,error:m,addArticle:y,updateArticle:S,deleteArticle:w,setPage:p,fetchArticles:f,loadNextPage:v},children:t})},n=()=>(0,o.useContext)(c)},45214:()=>{},53982:()=>{},64982:e=>{e.exports={style:{fontFamily:"'geistMono', 'geistMono Fallback'"},className:"__className_c3aa02",variable:"__variable_c3aa02"}},44751:e=>{e.exports={style:{fontFamily:"'geistSans', 'geistSans Fallback'"},className:"__className_1e4310",variable:"__variable_1e4310"}}},e=>{var t=t=>e(e.s=t);e.O(0,[104,954,788,415,130,215,744],()=>t(62009)),_N_E=e.O()}]);